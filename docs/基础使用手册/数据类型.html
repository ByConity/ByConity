<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-基础使用手册/数据类型">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">数据类型 | ByConity</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://byconity.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://byconity.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://byconity.github.io/docs/基础使用手册/数据类型"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="数据类型 | ByConity"><meta data-rh="true" name="description" content="文档类型：说明型"><meta data-rh="true" property="og:description" content="文档类型：说明型"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://byconity.github.io/docs/基础使用手册/数据类型"><link data-rh="true" rel="alternate" href="https://byconity.github.io/docs/基础使用手册/数据类型" hreflang="en"><link data-rh="true" rel="alternate" href="https://byconity.github.io/zh-cn/docs/基础使用手册/数据类型" hreflang="zh-cn"><link data-rh="true" rel="alternate" href="https://byconity.github.io/docs/基础使用手册/数据类型" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="ByConity RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="ByConity Atom Feed"><link rel="stylesheet" href="/assets/css/styles.320eaf13.css">
<link rel="preload" href="/assets/js/runtime~main.42b9ce04.js" as="script">
<link rel="preload" href="/assets/js/main.081140d6.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_dYNx" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="ByConity Logo" class="themedImage_rLhL themedImage--light_CjtC"><img src="/img/logo.png" alt="ByConity Logo" class="themedImage_rLhL themedImage--dark_quyK"></div><b class="navbar__title text--truncate">ByConity</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/ByConity简介/主要原理概念">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/community">Community</a><a class="navbar__item navbar__link" href="/users">Users</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_B_6h"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/基础使用手册/数据类型" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh-cn/docs/基础使用手册/数据类型" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-cn">中文（中国）</a></li></ul></div><a href="https://github.com/ByConity/ByConity" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_TSiV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ldyj"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_MxCR docsWrapper_h_X8"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_Kzpt" type="button"></button><div class="docPage_GWs5"><aside class="theme-doc-sidebar-container docSidebarContainer_ldoy"><div class="sidebarViewport_TwFD"><div class="sidebar_H_01"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_J18w"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/ByConity简介/主要原理概念">ByConity简介</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/SQL语法说明/ansi-compatibility">SQL语法说明</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/参与社区/Linux 搭建 ByConity 开发环境">参与社区</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/基础使用手册/导入数据">基础使用手册</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/基础使用手册/导入数据">导入数据</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/基础使用手册/导出数据">导出数据</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/基础使用手册/数据可视化">数据可视化</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/基础使用手册/数据类型">数据类型</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/基础使用手册/监控集群">监控集群</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/基础使用手册/管理后台任务">管理后台任务</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/基础使用手册/设计库表">设计库表</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/基础使用手册/连接客户端">连接客户端</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/基础使用手册/部署要求">部署要求</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/基础使用手册/配置计算组">配置计算组</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/基础使用手册/集群配置参数">集群配置参数</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/高级用户手册/事物和并发控制">高级用户手册</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_baW4"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_Njrt"><div class="docItemContainer_ZzVP"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_HWXL" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_IT7R"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">基础使用手册</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">数据类型</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_GIgr theme-doc-toc-mobile tocMobile_JEhh"><button type="button" class="clean-btn tocCollapsibleButton_Q9up">On this page</button></div><div class="theme-doc-markdown markdown"><h1>数据类型</h1><p>文档类型：说明型</p><p>内容提要：</p><ol><li>byconity 支持哪些数据类型</li><li>对比 clickhouse 缺少哪些数据类型</li></ol><h1>差异概要</h1><p>byconity 缺少 Date32 类型，Boolean 类型，Geo 类型（需要 allow_experimental_geo_types =1 才能使用）</p><p>byconity 的 Map 有 KV/Byte/CompactByte 三种模式，其中 KV 模式和开源 ClickHouse 兼容</p><h1>整数类型</h1><p>固定长度的整型，包括有符号整型或无符号整型。</p><p>创建表时，可以为整数设置类型参数 (例如. <strong>TINYINT(8)</strong>, <strong>SMALLINT(16)</strong>, <strong>INT(32)</strong>, <strong>BIGINT(64)</strong>), 但 byconity 会忽略它们.</p><h2 class="anchor anchorWithStickyNavbar_er05" id="整型范围">整型范围<a href="#整型范围" class="hash-link" aria-label="Direct link to 整型范围" title="Direct link to 整型范围">​</a></h2><ul><li><strong>Int8</strong> — <!-- -->[-128 : 127]</li><li><strong>Int16</strong> — <!-- -->[-32768 : 32767]</li><li><strong>Int32</strong> — <!-- -->[-2147483648 : 2147483647]</li><li><strong>Int64</strong> — <!-- -->[-9223372036854775808 : 9223372036854775807]</li><li><strong>Int128</strong> — <!-- -->[-170141183460469231731687303715884105728 : 170141183460469231731687303715884105727]</li><li><strong>Int256</strong> — <!-- -->[-57896044618658097711785492504343953926634992332820282019728792003956564819968 : 57896044618658097711785492504343953926634992332820282019728792003956564819967]</li></ul><p>别名：</p><ul><li><strong>Int8</strong> — <strong>TINYINT</strong>, <strong>BOOL</strong>, <strong>BOOLEAN</strong>, <strong>INT1</strong>.</li><li><strong>Int16</strong> — <strong>SMALLINT</strong>, <strong>INT2</strong>.</li><li><strong>Int32</strong> — <strong>INT</strong>, <strong>INT4</strong>, <strong>INTEGER</strong>.</li><li><strong>Int64</strong> — <strong>BIGINT</strong>.</li></ul><h2 class="anchor anchorWithStickyNavbar_er05" id="无符号整型范围">无符号整型范围<a href="#无符号整型范围" class="hash-link" aria-label="Direct link to 无符号整型范围" title="Direct link to 无符号整型范围">​</a></h2><ul><li><strong>UInt8</strong> — <!-- -->[0 : 255]</li><li><strong>UInt16</strong> — <!-- -->[0 : 65535]</li><li><strong>UInt32</strong> — <!-- -->[0 : 4294967295]</li><li><strong>UInt64</strong> — <!-- -->[0 : 18446744073709551615]</li><li><strong>UInt128</strong> — <!-- -->[0 : 340282366920938463463374607431768211455]</li><li><strong>UInt256</strong> — <!-- -->[0 : 115792089237316195423570985008687907853269984665640564039457584007913129639935]</li></ul><h1>UUID</h1><p>通用唯一标识符(UUID)是一个 16 字节的数字，用于标识记录。有关 UUID 的详细信息, 参见<a href="https://en.wikipedia.org/wiki/Universally_unique_identifier" target="_blank" rel="noopener noreferrer">维基百科</a>。</p><p>UUID 类型值的示例如下:</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">ec282515-a492-46d8-808c-8f3bd899b1b1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果在插入新记录时未指定 UUID 列的值，则 UUID 值将用零填充:</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">00000000-0000-0000-0000-000000000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_er05" id="如何生成">如何生成<a href="#如何生成" class="hash-link" aria-label="Direct link to 如何生成" title="Direct link to 如何生成">​</a></h2><p>要生成 UUID 值，byconity 提供了 <a href="https://clickhouse.com/docs/zh/sql-reference/functions/uuid-functions" target="_blank" rel="noopener noreferrer">generateuidv4</a> 函数。</p><h2 class="anchor anchorWithStickyNavbar_er05" id="用法示例">用法示例<a href="#用法示例" class="hash-link" aria-label="Direct link to 用法示例" title="Direct link to 用法示例">​</a></h2><p><strong>示例 1</strong></p><p>这个例子演示了创建一个具有 UUID 类型列的表，并在表中插入一个值。</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE t_uuid (x UUID, y String) ENGINE=Memory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">INSERT INTO t_uuid SELECT generateUUIDv4(), &#x27;Example 1&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT * FROM t_uuid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">┌────────────────────────────────────x─┬─y─────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ 136091bf-474c-496c-a743-bcd531e12563 │ Example 1 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──────────────────────────────────────┴───────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>示例 2</strong></p><p>在这个示例中，插入新记录时未指定 UUID 列的值。</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">INSERT INTO t_uuid (y) VALUES (&#x27;Example 2&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT * FROM t_uuid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">┌────────────────────────────────────x─┬─y─────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ 136091bf-474c-496c-a743-bcd531e12563 │ Example 1 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ 00000000-0000-0000-0000-000000000000 │ Example 2 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──────────────────────────────────────┴───────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_er05" id="限制">限制<a href="#限制" class="hash-link" aria-label="Direct link to 限制" title="Direct link to 限制">​</a></h2><p>UUID 数据类型只支持 <a href="https://clickhouse.com/docs/zh/sql-reference/data-types/string" target="_blank" rel="noopener noreferrer">字符串</a> 数据类型也支持的函数(比如, <a href="https://clickhouse.com/docs/zh/sql-reference/aggregate-functions/reference/min#agg_function-min" target="_blank" rel="noopener noreferrer">min</a>, <a href="https://clickhouse.com/docs/zh/sql-reference/aggregate-functions/reference/max#agg_function-max" target="_blank" rel="noopener noreferrer">max</a>, 和 <a href="https://clickhouse.com/docs/zh/sql-reference/aggregate-functions/reference/count#agg_function-count" target="_blank" rel="noopener noreferrer">count</a>)。</p><p>算术运算不支持 UUID 数据类型（例如, <a href="https://clickhouse.com/docs/zh/sql-reference/functions/arithmetic-functions#arithm_func-abs" target="_blank" rel="noopener noreferrer">abs</a>）或聚合函数，例如 <a href="https://clickhouse.com/docs/zh/sql-reference/aggregate-functions/reference/sum#agg_function-sum" target="_blank" rel="noopener noreferrer">sum</a> 和 <a href="https://clickhouse.com/docs/zh/sql-reference/aggregate-functions/reference/avg#agg_function-avg" target="_blank" rel="noopener noreferrer">avg</a>.</p><h1>浮点类型</h1><p><a href="https://en.wikipedia.org/wiki/IEEE_754" target="_blank" rel="noopener noreferrer">浮点数</a>。</p><p>类型与以下 C 语言中类型是相同的：</p><ul><li><strong>Float32</strong> - <strong>float</strong></li><li><strong>Float64</strong> - <strong>double</strong></li></ul><p>我们建议您尽可能以整数形式存储数据。例如，将固定精度的数字转换为整数值，例如货币数量或页面加载时间用毫秒为单位表示</p><h2 class="anchor anchorWithStickyNavbar_er05" id="使用浮点数">使用浮点数<a href="#使用浮点数" class="hash-link" aria-label="Direct link to 使用浮点数" title="Direct link to 使用浮点数">​</a></h2><ul><li>对浮点数进行计算可能引起四舍五入的误差。</li></ul><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT 1 - 0.9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">┌───────minus(1, 0.9)─┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ 0.09999999999999998 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>计算的结果取决于计算方法（计算机系统的处理器类型和体系结构）</li><li>浮点计算结果可能是诸如无穷大（<strong>INF</strong>）和«非数字»（<strong>NaN</strong>）。对浮点数计算的时候应该考虑到这点。</li><li>当一行行阅读浮点数的时候，浮点数的结果可能不是机器最近显示的数值。</li></ul><h2 class="anchor anchorWithStickyNavbar_er05" id="nan-和-inf">NaN 和 Inf<a href="#nan-和-inf" class="hash-link" aria-label="Direct link to NaN 和 Inf" title="Direct link to NaN 和 Inf">​</a></h2><p>与标准 SQL 相比，byconity 支持以下类别的浮点数：</p><ul><li><strong>Inf</strong> – 正无穷</li></ul><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT 0.5 / 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">┌─divide(0.5, 0)─┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│            inf │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>-Inf</strong> – 负无穷</li></ul><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT -0.5 / 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">┌─divide(-0.5, 0)─┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│            -inf │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>NaN</strong> – 非数字</li></ul><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT 0 / 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌─divide(0, 0)─┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│          nan │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>可以在 <a href="https://clickhouse.com/docs/zh/sql-reference/data-types/float" target="_blank" rel="noopener noreferrer">ORDER BY 子句</a> 查看更多关于 <strong>NaN</strong> 排序的规则。</p><h1>Decimal</h1><p>包括 Decimal(P,S),Decimal32(S),Decimal64(S),Decimal128(S)等类型</p><p>有符号的定点数，可在加、减和乘法运算过程中保持精度。对于除法，最低有效数字会被丢弃（不舍入）。</p><h2 class="anchor anchorWithStickyNavbar_er05" id="参数">参数<a href="#参数" class="hash-link" aria-label="Direct link to 参数" title="Direct link to 参数">​</a></h2><ul><li>P - 精度。有效范围：<!-- -->[1:38]<!-- -->，决定可以有多少个十进制数字（包括分数）。</li><li>S - 规模。有效范围：<!-- -->[0：P]<!-- -->，决定数字的小数部分中包含的小数位数。</li></ul><p>对于不同的 P 参数值 Decimal 表示，以下例子都是同义的： -P 从<!-- -->[1:9]<!-- -->-对于 Decimal32(S) -P 从<!-- -->[10:18]<!-- -->-对于 Decimal64(小号) -P 从<!-- -->[19:38]<!-- -->-对于 Decimal128（S)</p><h2 class="anchor anchorWithStickyNavbar_er05" id="十进制值范围">十进制值范围<a href="#十进制值范围" class="hash-link" aria-label="Direct link to 十进制值范围" title="Direct link to 十进制值范围">​</a></h2><ul><li>Decimal32(S) - ( -1 <em> 10^(9 - S),1</em>10^(9-S) )</li><li>Decimal64(S) - ( -1 <em> 10^(18 - S),1</em>10^(18-S) )</li><li>Decimal128(S) - ( -1 <em> 10^(38 - S),1</em>10^(38-S) )</li></ul><p>例如，Decimal32(4) 可以表示 -99999.9999 至 99999.9999 的数值，步长为 0.0001。</p><h2 class="anchor anchorWithStickyNavbar_er05" id="内部表示方式">内部表示方式<a href="#内部表示方式" class="hash-link" aria-label="Direct link to 内部表示方式" title="Direct link to 内部表示方式">​</a></h2><p>数据采用与自身位宽相同的有符号整数存储。这个数在内存中实际范围会高于上述范围，从 String 转换到十进制数的时候会做对应的检查。</p><p>由于现代 CPU 不支持 128 位数字，因此 Decimal128 上的操作由软件模拟。所以 Decimal128 的运算速度明显慢于 Decimal32/Decimal64。</p><h2 class="anchor anchorWithStickyNavbar_er05" id="运算和结果类型">运算和结果类型<a href="#运算和结果类型" class="hash-link" aria-label="Direct link to 运算和结果类型" title="Direct link to 运算和结果类型">​</a></h2><p>对 Decimal 的二进制运算导致更宽的结果类型（无论参数的顺序如何）。</p><ul><li>Decimal64(S1) <!-- -->&lt;<!-- -->op<!-- -->&gt;<!-- --> Decimal32(S2) -&gt; Decimal64(S)</li><li>Decimal128(S1) <!-- -->&lt;<!-- -->op<!-- -->&gt;<!-- --> Decimal32(S2) -&gt; Decimal128(S)</li><li>Decimal128(S1) <!-- -->&lt;<!-- -->op<!-- -->&gt;<!-- --> Decimal64(S2) -&gt; Decimal128(S)</li></ul><p>精度变化的规则：</p><ul><li>加法，减法：S = max(S1, S2)。</li><li>乘法：S = S1 + S2。</li><li>除法：S = S1。</li></ul><p>对于 Decimal 和整数之间的类似操作，结果是与参数大小相同的十进制。</p><p>未定义 Decimal 和 Float32/Float64 之间的函数。要执行此类操作，您可以使用：toDecimal32、toDecimal64、toDecimal128 或 toFloat32，toFloat64，需要显式地转换其中一个参数。注意，结果将失去精度，类型转换是昂贵的操作。</p><p>Decimal 上的一些函数返回结果为 Float64（例如，var 或 stddev）。对于其中一些，中间计算发生在 Decimal 中。对于此类函数，尽管结果类型相同，但 Float64 和 Decimal 中相同数据的结果可能不同。</p><h2 class="anchor anchorWithStickyNavbar_er05" id="溢出检查">溢出检查<a href="#溢出检查" class="hash-link" aria-label="Direct link to 溢出检查" title="Direct link to 溢出检查">​</a></h2><p>在对 Decimal 类型执行操作时，数值可能会发生溢出。分数中的过多数字被丢弃（不是舍入的）。整数中的过多数字将导致异常。</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT toDecimal32(2, 4) AS x, x / 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌──────x─┬─divide(toDecimal32(2, 4), 3)─┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ 2.0000 │                       0.6666 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└────────┴──────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT toDecimal32(4.2, 8) AS x, x * x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DB::Exception: Scale is out of bounds.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT toDecimal32(4.2, 8) AS x, 6 * x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DB::Exception: Decimal math overflow.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>检查溢出会导致计算变慢。如果已知溢出不可能，则可以通过设置 <strong>decimal_check_overflow</strong> 来禁用溢出检查，在这种情况下，溢出将导致结果不正确：</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SET decimal_check_overflow = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT toDecimal32(4.2, 8) AS x, 6 * x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌──────────x─┬─multiply(6, toDecimal32(4.2, 8))─┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ 4.20000000 │                     -17.74967296 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└────────────┴──────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>溢出检查不仅发生在算术运算上，还发生在比较运算上：</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT toDecimal32(1, 8) &lt; 100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DB::Exception: Can&#x27;t compare.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>日期时间相关类型</h1><h2 class="anchor anchorWithStickyNavbar_er05" id="date">Date<a href="#date" class="hash-link" aria-label="Direct link to Date" title="Direct link to Date">​</a></h2><p>用两个字节存储，表示从 1970-01-01 (无符号) 到当前的日期值。允许存储从 Unix 纪元开始到编译阶段定义的上限阈值常量（目前上限是 2106 年，但最终完全支持的年份为 2105）。最小值输出为 1970-01-01。</p><p>值的范围: <!-- -->[1970-01-01, 2149-06-06]<!-- -->。</p><p>日期中没有存储时区信息。</p><h3 class="anchor anchorWithStickyNavbar_er05" id="示例"><strong>示例</strong><a href="#示例" class="hash-link" aria-label="Direct link to 示例" title="Direct link to 示例">​</a></h3><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE date_test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    `timestamp` Date,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    `event_id` UInt8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENGINE = Memory;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">INSERT INTO date_test VALUES (&#x27;2019-12-20&#x27;, 1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT * FROM date_test;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">┌──timestamp─┬─event_id─┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ 2019-12-20 │        1 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└────────────┴──────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_er05" id="datetime">DateTime<a href="#datetime" class="hash-link" aria-label="Direct link to DateTime" title="Direct link to DateTime">​</a></h2><p>时间戳类型。用四个字节（无符号的）存储 Unix 时间戳）。允许存储与日期类型相同的范围内的值。最小值为 1970-01-01 00:00:00。时间戳类型值精确到秒（没有闰秒）。</p><p>值的范围: <!-- -->[1970-01-01 00:00:00, 2106-02-07 06:28:15]<!-- -->。</p><h3 class="anchor anchorWithStickyNavbar_er05" id="时区">时区<a href="#时区" class="hash-link" aria-label="Direct link to 时区" title="Direct link to 时区">​</a></h3><p>使用启动客户端或服务器时的系统时区，时间戳是从文本（分解为组件）转换为二进制并返回。在文本格式中，有关夏令时的信息会丢失。</p><p>默认情况下，客户端连接到服务的时候会使用服务端时区。您可以通过启用客户端命令行选项 <strong>--use_client_time_zone</strong> 来设置使用客户端时间。</p><p>因此，在处理文本日期时（例如，在保存文本转储时），请记住在夏令时更改期间可能存在歧义，如果时区发生更改，则可能存在匹配数据的问题。</p><h2 class="anchor anchorWithStickyNavbar_er05" id="datetime64">DateTime64<a href="#datetime64" class="hash-link" aria-label="Direct link to DateTime64" title="Direct link to DateTime64">​</a></h2><p>此类型允许以日期（date）加时间（time）的形式来存储一个时刻的时间值，具有定义的亚秒精度</p><p>时间刻度大小（精度）：10(-精度) 秒</p><p>语法:</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">DateTime64(precision, [timezone])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在内部，此类型以 Int64 类型将数据存储为自 Linux 纪元开始(1970-01-01 00:00:00UTC)的时间刻度数（ticks）。时间刻度的分辨率由 precision 参数确定。此外，<strong>DateTime64</strong> 类型可以像存储其他数据列一样存储时区信息，时区会影响 <strong>DateTime64</strong> 类型的值如何以文本格式显示，以及如何解析以字符串形式指定的时间数据 (‘2020-01-01 05:00:01.000’)。时区不存储在表的行中（也不在 resultset 中），而是存储在列的元数据中。详细信息请参考 <a href="https://clickhouse.com/docs/zh/sql-reference/data-types/datetime" target="_blank" rel="noopener noreferrer">DateTime</a> 数据类型.</p><p>值的范围: <!-- -->[1900-01-01 00:00:00, 2299-12-31 23:59:59.99999999]<!-- --> (注意: 最大值的精度是 8)。</p><h3 class="anchor anchorWithStickyNavbar_er05" id="示例-1">示例<a href="#示例-1" class="hash-link" aria-label="Direct link to 示例" title="Direct link to 示例">​</a></h3><p><strong>1.</strong> 创建一个具有 <strong>DateTime64</strong> 类型列的表，并向其中插入数据:</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE dt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    `timestamp` DateTime64(3, &#x27;Asia/Istanbul&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    `event_id` UInt8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENGINE = Memory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">INSERT INTO dt Values (1546300800000, 1), (&#x27;2019-01-01 00:00:00&#x27;, 2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT * FROM dt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">┌───────────────timestamp─┬─event_id─┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ 2019-01-01 03:00:00.000 │        1 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ 2019-01-01 00:00:00.000 │        2 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────┴──────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>将日期时间作为 integer 类型插入时，它会被视为适当缩放的 Unix 时间戳(UTC)。<strong>1546300800000</strong> （精度为 3）表示 <strong>&#x27;2019-01-01 00:00:00&#x27;</strong> UTC. 不过，因为 <strong>timestamp</strong> 列指定了 <strong>Asia/Istanbul</strong> （UTC+3）的时区，当作为字符串输出时，它将显示为 <strong>&#x27;2019-01-01 03:00:00&#x27;</strong></li><li>当把字符串作为日期时间插入时，它会被赋予时区信息。 <strong>&#x27;2019-01-01 00:00:00&#x27;</strong> 将被认为处于 <strong>Asia/Istanbul</strong> 时区并被存储为 <strong>1546290000000</strong>.</li></ul><p><strong>2.</strong> 过滤 <strong>DateTime64</strong> 类型的值</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT * FROM dt WHERE timestamp = toDateTime64(&#x27;2019-01-01 00:00:00&#x27;, 3, &#x27;Asia/Istanbul&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">┌───────────────timestamp─┬─event_id─┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ 2019-01-01 00:00:00.000 │        2 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────┴──────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>与 <strong>DateTime</strong> 不同, <strong>DateTime64</strong> 类型的值不会自动从 <strong>String</strong> 类型的值转换过来</p><p><strong>3.</strong> 获取 <strong>DateTime64</strong> 类型值的时区信息:</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT toDateTime64(now(), 3, &#x27;Asia/Istanbul&#x27;) AS column, toTypeName(column) AS x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">┌──────────────────column─┬─x──────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ 2019-10-16 04:12:04.000 │ DateTime64(3, &#x27;Asia/Istanbul&#x27;) │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────┴────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>4.</strong> 时区转换</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">toDateTime64(timestamp, 3, &#x27;Europe/London&#x27;) as lon_time,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">toDateTime64(timestamp, 3, &#x27;Asia/Istanbul&#x27;) as mos_time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM dt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">┌───────────────lon_time──┬────────────────mos_time─┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ 2019-01-01 00:00:00.000 │ 2019-01-01 03:00:00.000 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ 2018-12-31 21:00:00.000 │ 2019-01-01 00:00:00.000 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────┴─────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>枚举类型（Enum8,Enum16）</h1><p>包括 <strong>Enum8</strong> 和 <strong>Enum16</strong> 类型。<strong>Enum</strong> 保存 <strong>&#x27;string&#x27;= integer</strong> 的对应关系。在 byconity 中，尽管用户使用的是字符串常量，但所有含有 <strong>Enum</strong> 数据类型的操作都是按照包含整数的值来执行。这在性能方面比使用 <strong>String</strong> 数据类型更有效。</p><ul><li><strong>Enum8</strong> 用 <strong>&#x27;String&#x27;= Int8</strong> 对描述。</li><li><strong>Enum16</strong> 用 <strong>&#x27;String&#x27;= Int16</strong> 对描述。</li></ul><h2 class="anchor anchorWithStickyNavbar_er05" id="用法示例-1">用法示例<a href="#用法示例-1" class="hash-link" aria-label="Direct link to 用法示例" title="Direct link to 用法示例">​</a></h2><p>创建一个带有一个枚举 <strong>Enum8(&#x27;hello&#x27; = 1, &#x27;world&#x27; = 2)</strong> 类型的列：</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE t_enum</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    x Enum8(&#x27;hello&#x27; = 1, &#x27;world&#x27; = 2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENGINE = Memory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这个 <strong>x</strong> 列只能存储类型定义中列出的值：<strong>&#x27;hello&#x27;</strong>或<strong>&#x27;world&#x27;</strong>。如果您尝试保存任何其他值，byconity 抛出异常。</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">:) INSERT INTO t_enum VALUES (&#x27;hello&#x27;), (&#x27;world&#x27;), (&#x27;hello&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INSERT INTO t_enum VALUES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ok.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 rows in set. Elapsed: 0.002 sec.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:) insert into t_enum values(&#x27;a&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INSERT INTO t_enum VALUES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Exception on client:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Code: 49. DB::Exception: Unknown element &#x27;a&#x27; for type Enum8(&#x27;hello&#x27; = 1, &#x27;world&#x27; = 2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>当您从表中查询数据时，byconity 从 <strong>Enum</strong> 中输出字符串值。</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT * FROM t_enum</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌─x─────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ hello │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ world │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ hello │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└───────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果需要看到对应行的数值，则必须将 <strong>Enum</strong> 值转换为整数类型。</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT CAST(x, &#x27;Int8&#x27;) FROM t_enum</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌─CAST(x, &#x27;Int8&#x27;)─┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│               1 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│               2 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│               1 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在查询中创建枚举值，您还需要使用 <strong>CAST</strong>。</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT toTypeName(CAST(&#x27;a&#x27;, &#x27;Enum8(\&#x27;a\&#x27; = 1, \&#x27;b\&#x27; = 2)&#x27;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌─toTypeName(CAST(&#x27;a&#x27;, &#x27;Enum8(\&#x27;a\&#x27; = 1, \&#x27;b\&#x27; = 2)&#x27;))─┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ Enum8(&#x27;a&#x27; = 1, &#x27;b&#x27; = 2)                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──────────────────────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_er05" id="规则及用法">规则及用法<a href="#规则及用法" class="hash-link" aria-label="Direct link to 规则及用法" title="Direct link to 规则及用法">​</a></h2><p><strong>Enum8</strong> 类型的每个值范围是 <strong>-128 ... 127</strong>，<strong>Enum16</strong> 类型的每个值范围是 <strong>-32768 ... 32767</strong>。所有的字符串或者数字都必须是不一样的。允许存在空字符串。如果某个 Enum 类型被指定了（在表定义的时候），数字可以是任意顺序。然而，顺序并不重要。</p><p><strong>Enum</strong> 中的字符串和数值都不能是 <a href="https://clickhouse.com/docs/zh/sql-reference/data-types/enum" target="_blank" rel="noopener noreferrer">NULL</a>。</p><p><strong>Enum</strong> 包含在 <a href="https://clickhouse.com/docs/zh/sql-reference/data-types/nullable" target="_blank" rel="noopener noreferrer">可为空</a> 类型中。因此，如果您使用此查询创建一个表</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE t_enum_nullable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    x Nullable( Enum8(&#x27;hello&#x27; = 1, &#x27;world&#x27; = 2) )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENGINE = TinyLog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>不仅可以存储 <strong>&#x27;hello&#x27;</strong> 和 <strong>&#x27;world&#x27;</strong> ，还可以存储 <strong>NULL</strong>。</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">INSERT INTO t_enum_nullable Values(&#x27;hello&#x27;),(&#x27;world&#x27;),(NULL)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在内存中，<strong>Enum</strong> 列的存储方式与相应数值的 <strong>Int8</strong> 或 <strong>Int16</strong> 相同。</p><p>当以文本方式读取的时候，byconity 将值解析成字符串然后去枚举值的集合中搜索对应字符串。如果没有找到，会抛出异常。当读取文本格式的时候，会根据读取到的字符串去找对应的数值。如果没有找到，会抛出异常。</p><p>当以文本形式写入时，byconity 将值解析成字符串写入。如果列数据包含垃圾数据（不是来自有效集合的数字），则抛出异常。Enum 类型以二进制读取和写入的方式与 <strong>Int8</strong> 和 <strong>Int16</strong> 类型一样的。</p><p>隐式默认值是数值最小的值。</p><p>在 <strong>ORDER BY</strong>，<strong>GROUP BY</strong>，<strong>IN</strong>，<strong>DISTINCT</strong> 等等中，Enum 的行为与相应的数字相同。例如，按数字排序。对于等式运算符和比较运算符，Enum 的工作机制与它们在底层数值上的工作机制相同。</p><p>枚举值不能与数字进行比较。枚举可以与常量字符串进行比较。如果与之比较的字符串不是有效 Enum 值，则将引发异常。可以使用 IN 运算符来判断一个 Enum 是否存在于某个 Enum 集合中，其中集合中的 Enum 需要用字符串表示。</p><p>大多数具有数字和字符串的运算并不适用于 Enums；例如，Enum 类型不能和一个数值相加。但是，Enum 有一个原生的 <strong>toString</strong> 函数，它返回它的字符串值。</p><p>Enum 值使用 <strong>toT</strong> 函数可以转换成数值类型，其中 T 是一个数值类型。若 <strong>T</strong> 恰好对应 Enum 的底层数值类型，这个转换是零消耗的。</p><p>Enum 类型可以被 <strong>ALTER</strong> 无成本地修改对应集合的值。可以通过 <strong>ALTER</strong> 操作来增加或删除 Enum 的成员（只要表没有用到该值，删除都是安全的）。作为安全保障，改变之前使用过的 Enum 成员将抛出异常。</p><p>通过 <strong>ALTER</strong> 操作，可以将 <strong>Enum8</strong> 转成 <strong>Enum16</strong>，反之亦然，就像 <strong>Int8</strong> 转 <strong>Int16</strong> 一样。</p><h1>字符串类型</h1><h2 class="anchor anchorWithStickyNavbar_er05" id="string">String<a href="#string" class="hash-link" aria-label="Direct link to String" title="Direct link to String">​</a></h2><p>字符串可以任意长度的。它可以包含任意的字节集，包含空字节。因此，字符串类型可以代替其他 DBMSs 中的 VARCHAR、BLOB、CLOB 等类型。</p><h3 class="anchor anchorWithStickyNavbar_er05" id="编码">编码<a href="#编码" class="hash-link" aria-label="Direct link to 编码" title="Direct link to 编码">​</a></h3><p>byconity 没有编码的概念。字符串可以是任意的字节集，按它们原本的方式进行存储和输出。 若需存储文本，我们建议使用 UTF-8 编码。至少，如果你的终端使用 UTF-8（推荐），这样读写就不需要进行任何的转换了。 同样，对不同的编码文本 byconity 会有不同处理字符串的函数。 比如，<strong>length</strong> 函数可以计算字符串包含的字节数组的长度，然而 <strong>lengthUTF8</strong> 函数是假设字符串以 UTF-8 编码，计算的是字符串包含的 Unicode 字符的长度。</p><h2 class="anchor anchorWithStickyNavbar_er05" id="fixstring">FixString<a href="#fixstring" class="hash-link" aria-label="Direct link to FixString" title="Direct link to FixString">​</a></h2><p>固定长度 N 的字符串（N 必须是严格的正自然数）。</p><p>您可以使用下面的语法对列声明为 <strong>FixedString</strong> 类型：</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;column_name&gt; FixedString(N)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其中 <strong>N</strong> 表示自然数。</p><p>当数据的长度恰好为 N 个字节时，<strong>FixedString</strong> 类型是高效的。 在其他情况下，这可能会降低效率。</p><p>可以有效存储在 <strong>FixedString</strong> 类型的列中的值的示例：</p><ul><li>二进制表示的 IP 地址（IPv6 使用 <strong>FixedString(16)</strong>）</li><li>语言代码（ru_RU, en_US … ）</li><li>货币代码（USD, RUB … ）</li><li>二进制表示的哈希值（MD5 使用 <strong>FixedString(16)</strong>，SHA256 使用 <strong>FixedString(32)</strong>）</li></ul><p>请使用 <a href="https://clickhouse.com/docs/zh/sql-reference/data-types/uuid" target="_blank" rel="noopener noreferrer">UUID</a> 数据类型来存储 UUID 值，。</p><p>当向 byconity 中插入数据时,</p><ul><li>如果字符串包含的字节数少于 `N’,将对字符串末尾进行空字节填充。</li><li>如果字符串包含的字节数大于 <strong>N</strong>,将抛出<strong>Too large value for FixedString(N)</strong>异常。</li></ul><p>当做数据查询时，byconity 不会删除字符串末尾的空字节。 如果使用 <strong>WHERE</strong> 子句，则须要手动添加空字节以匹配 <strong>FixedString</strong> 的值。 以下示例阐明了如何将 <strong>WHERE</strong> 子句与 <strong>FixedString</strong> 一起使用。</p><p>考虑带有<strong>FixedString（2)</strong>列的表：</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">┌─name──┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ b     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└───────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>查询语句 <strong>SELECT <!-- -->*<!-- --> FROM FixedStringTable WHERE a = &#x27;b&#x27;</strong> 不会返回任何结果。请使用空字节来填充筛选条件。</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT * FROM FixedStringTable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WHERE a = &#x27;b\0&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">┌─a─┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ b │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└───┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这种方式与 MySQL 的 <strong>CHAR</strong> 类型的方式不同（MySQL 中使用空格填充字符串，并在输出时删除空格）。</p><p>请注意，<strong>FixedString(N)</strong>的长度是个常量。仅由空字符组成的字符串，函数 <a href="https://clickhouse.com/docs/zh/sql-reference/functions/array-functions#array_functions-length" target="_blank" rel="noopener noreferrer">length</a> 返回值为<strong> N</strong>,而函数 <a href="https://clickhouse.com/docs/zh/sql-reference/functions/string-functions#empty" target="_blank" rel="noopener noreferrer">empty</a> 的返回值为 <strong>1</strong>。</p><h1>嵌套数据结构</h1><h2 class="anchor anchorWithStickyNavbar_er05" id="nestedname1-type1-name2-type2-">Nested(Name1 Type1, Name2 Type2, …)<a href="#nestedname1-type1-name2-type2-" class="hash-link" aria-label="Direct link to Nested(Name1 Type1, Name2 Type2, …)" title="Direct link to Nested(Name1 Type1, Name2 Type2, …)">​</a></h2><p>嵌套数据结构类似于嵌套表。嵌套数据结构的参数（列名和类型）与 CREATE 查询类似。每个表可以包含任意多行嵌套数据结构。</p><p>示例:</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE nested_test (s String, nest Nested(x UInt8, y UInt32)) ENGINE = Memory;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INSERT INTO nested_test VALUES (&#x27;Hello&#x27;, [1,2], [10,20]), (&#x27;World&#x27;, [3,4,5], [30,40,50]), (&#x27;Goodbye&#x27;, [], []);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT * FROM nested_test;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">┌─s───────┬─nest.x──┬─nest.y─────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ Hello   │ [1,2]   │ [10,20]    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ World   │ [3,4,5] │ [30,40,50] │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ Goodbye │ []      │ []         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────┴─────────┴────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>所以可以简单地把嵌套数据结构当做是所有列都是相同长度的多列数组。</p><p>SELECT 查询只有在使用 ARRAY JOIN 的时候才可以指定整个嵌套数据结构的名称。更多信息，参考 «ARRAY JOIN 子句»。示例：</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT s, nest.x, nest.y FROM nested_test ARRAY JOIN nest;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">┌─s─────┬─nest.x─┬─nest.y─┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ Hello │      1 │     10 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ Hello │      2 │     20 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ World │      3 │     30 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ World │      4 │     40 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ World │      5 │     50 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└───────┴────────┴────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>不能对整个嵌套数据结构执行 SELECT。只能明确列出属于它一部分列。</p><p>对于 INSERT 查询，可以单独地传入所有嵌套数据结构中的列数组（假如它们是单独的列数组）。在插入过程中，系统会检查它们是否有相同的长度。</p><p>对于 DESCRIBE 查询，嵌套数据结构中的列会以相同的方式分别列出来。</p><p>ALTER 查询对嵌套数据结构的操作非常有限。</p><h1>元组类型（Tuple）</h1><p>元组，其中每个元素都有单独的 <a href="https://clickhouse.com/docs/zh/sql-reference/data-types/#data_types" target="_blank" rel="noopener noreferrer">类型</a>。</p><p>不能在表中存储元组（除了内存表）。它们可以用于临时列分组。在查询中，IN 表达式和带特定参数的 lambda 函数可以来对临时列进行分组。更多信息，请参阅 <a href="https://clickhouse.com/docs/zh/sql-reference/data-types/tuple" target="_blank" rel="noopener noreferrer">IN 操作符</a> 和 <a href="https://clickhouse.com/docs/zh/sql-reference/data-types/tuple" target="_blank" rel="noopener noreferrer">高阶函数</a>。</p><p>元组可以是查询的结果。在这种情况下，对于 JSON 以外的文本格式，括号中的值是逗号分隔的。在 JSON 格式中，元组作为数组输出（在方括号中）。</p><h2 class="anchor anchorWithStickyNavbar_er05" id="创建元组">创建元组<a href="#创建元组" class="hash-link" aria-label="Direct link to 创建元组" title="Direct link to 创建元组">​</a></h2><p>可以使用函数来创建元组：</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">tuple(T1, T2, ...)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>创建元组的示例：</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">:) SELECT tuple(1,&#x27;a&#x27;) AS x, toTypeName(x)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (1, &#x27;a&#x27;) AS x,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    toTypeName(x)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌─x───────┬─toTypeName(tuple(1, &#x27;a&#x27;))─┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ (1,&#x27;a&#x27;) │ Tuple(UInt8, String)      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────┴───────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 rows in set. Elapsed: 0.021 sec.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_er05" id="元组中的数据类型">元组中的数据类型<a href="#元组中的数据类型" class="hash-link" aria-label="Direct link to 元组中的数据类型" title="Direct link to 元组中的数据类型">​</a></h2><p>在动态创建元组时，byconity 会自动为元组的每一个参数赋予最小可表达的类型。如果参数为 <a href="https://clickhouse.com/docs/zh/sql-reference/data-types/tuple#null-literal" target="_blank" rel="noopener noreferrer">NULL</a>，那这个元组对应元素是 <a href="https://clickhouse.com/docs/zh/sql-reference/data-types/nullable" target="_blank" rel="noopener noreferrer">可为空</a>。</p><p>自动数据类型检测示例：</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT tuple(1, NULL) AS x, toTypeName(x)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (1, NULL) AS x,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    toTypeName(x)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌─x────────┬─toTypeName(tuple(1, NULL))──────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ (1,NULL) │ Tuple(UInt8, Nullable(Nothing)) │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──────────┴─────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 rows in set. Elapsed: 0.002 sec.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>低基数类型</h1><p>把其它数据类型转变为字典编码类型。</p><h2 class="anchor anchorWithStickyNavbar_er05" id="语法">语法<a href="#语法" class="hash-link" aria-label="Direct link to 语法" title="Direct link to 语法">​</a></h2><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">LowCardinality(data_type)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>参数</strong></p><ul><li><strong>data_type</strong> — String, FixedString, Date, DateTime，包括数字类型，但是 Decimal 除外。对一些数据类型来说，<strong>LowCardinality</strong> 并不高效，详查 <a href="https://clickhouse.com/docs/zh/operations/settings/settings#allow_suspicious_low_cardinality_types" target="_blank" rel="noopener noreferrer">allow_suspicious_low_cardinality_types</a> 设置描述。</li></ul><h2 class="anchor anchorWithStickyNavbar_er05" id="描述">描述<a href="#描述" class="hash-link" aria-label="Direct link to 描述" title="Direct link to 描述">​</a></h2><p><strong>LowCardinality</strong> 是一种改变数据存储和数据处理方法的概念。 byconity 会把 <strong>LowCardinality</strong> 所在的列进行 <a href="https://en.wikipedia.org/wiki/Dictionary_coder" target="_blank" rel="noopener noreferrer">dictionary coding</a>。对很多应用来说，处理字典编码的数据可以显著的增加 <a href="https://clickhouse.com/docs/zh/sql-reference/statements/select/" target="_blank" rel="noopener noreferrer">SELECT</a> 查询速度。</p><p>使用 <strong>LowCarditality</strong> 数据类型的效率依赖于数据的多样性。如果一个字典包含少于 10000 个不同的值，那么 byconity 可以进行更高效的数据存储和处理。反之如果字典多于 10000，效率会表现的更差。</p><p>当使用字符类型的时候，可以考虑使用 <strong>LowCardinality</strong> 代替 Enum。 <strong>LowCardinality</strong> 通常更加灵活和高效。</p><h2 class="anchor anchorWithStickyNavbar_er05" id="例子">例子<a href="#例子" class="hash-link" aria-label="Direct link to 例子" title="Direct link to 例子">​</a></h2><p>创建一个 <strong>LowCardinality</strong> 类型的列：</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE lc_t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    `id` UInt16,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    `strings` LowCardinality(String)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENGINE = Memory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ORDER BY id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>域</h1><h2 class="anchor anchorWithStickyNavbar_er05" id="定义">定义<a href="#定义" class="hash-link" aria-label="Direct link to 定义" title="Direct link to 定义">​</a></h2><p>Domain 类型是特定实现的类型，它总是与某个现存的基础类型保持二进制兼容的同时添加一些额外的特性，以能够在维持磁盘数据不变的情况下使用这些额外的特性。目前 byconity 暂不支持自定义 domain 类型。</p><p>如果你可以在一个地方使用与 Domain 类型二进制兼容的基础类型，那么在相同的地方您也可以使用 Domain 类型，例如：</p><ul><li>使用 Domain 类型作为表中列的类型</li><li>对 Domain 类型的列进行读/写数据</li><li>如果与 Domain 二进制兼容的基础类型可以作为索引，那么 Domain 类型也可以作为索引</li><li>将 Domain 类型作为参数传递给函数使用</li><li>其他</li></ul><h3 class="anchor anchorWithStickyNavbar_er05" id="domains-的额外特性">Domains 的额外特性<a href="#domains-的额外特性" class="hash-link" aria-label="Direct link to Domains 的额外特性" title="Direct link to Domains 的额外特性">​</a></h3><ul><li>在执行 SHOW CREATE TABLE 或 DESCRIBE TABLE 时，其对应的列总是展示为 Domain 类型的名称</li><li>在 INSERT INTO domain_table(domain_column) VALUES(…)中输入数据总是以更人性化的格式进行输入</li><li>在 SELECT domain_column FROM domain_table 中数据总是以更人性化的格式输出</li><li>在 INSERT INTO domain_table FORMAT CSV …中，实现外部源数据以更人性化的格式载入</li></ul><h3 class="anchor anchorWithStickyNavbar_er05" id="domains-类型的限制">Domains 类型的限制<a href="#domains-类型的限制" class="hash-link" aria-label="Direct link to Domains 类型的限制" title="Direct link to Domains 类型的限制">​</a></h3><ul><li>无法通过 <strong>ALTER TABLE</strong> 将基础类型的索引转换为 Domain 类型的索引。</li><li>当从其他列或表插入数据时，无法将 string 类型的值隐式地转换为 Domain 类型的值。</li><li>无法对存储为 Domain 类型的值添加约束。</li></ul><h2 class="anchor anchorWithStickyNavbar_er05" id="ipv4">ipv4<a href="#ipv4" class="hash-link" aria-label="Direct link to ipv4" title="Direct link to ipv4">​</a></h2><p><strong>IPv4</strong> 是与 <strong>UInt32</strong> 类型保持二进制兼容的 Domain 类型，其用于存储 IPv4 地址的值。它提供了更为紧凑的二进制存储的同时支持识别可读性更加友好的输入输出格式。</p><h3 class="anchor anchorWithStickyNavbar_er05" id="基本使用">基本使用<a href="#基本使用" class="hash-link" aria-label="Direct link to 基本使用" title="Direct link to 基本使用">​</a></h3><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE hits (url String, from IPv4) ENGINE = Memory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DESCRIBE TABLE hits;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">┌─name─┬─type───┬─default_type─┬─default_expression─┬─comment─┬─codec_expression─┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ url  │ String │              │                    │         │                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ from │ IPv4   │              │                    │         │                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──────┴────────┴──────────────┴────────────────────┴─────────┴──────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>同时您也可以使用 <strong>IPv4</strong> 类型的列作为主键：</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE hits (url String, from IPv4) ENGINE = Memory;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在写入与查询时，<strong>IPv4</strong> 类型能够识别可读性更加友好的输入输出格式：</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">INSERT INTO hits (url, from) VALUES (&#x27;https://wikipedia.org&#x27;, &#x27;116.253.40.133&#x27;)(&#x27;https://byconity.com&#x27;, &#x27;183.247.232.58&#x27;)(&#x27;https://byconity.com/docs/en/&#x27;, &#x27;116.106.34.242&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT * FROM hits;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">┌─url────────────────────────────────┬───────────from─┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ https://byconity.com/docs/en/ │ 116.106.34.242 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ https://wikipedia.org              │ 116.253.40.133 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ https://byconity.com          │ 183.247.232.58 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└────────────────────────────────────┴────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>同时它提供更为紧凑的二进制存储格式：</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT toTypeName(from), hex(from) FROM hits LIMIT 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">┌─toTypeName(from)─┬─hex(from)─┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ IPv4             │ B7F7E83A  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──────────────────┴───────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>不可隐式转换为除 <strong>UInt32</strong> 以外的其他类型类型。如果要将 <strong>IPv4</strong> 类型的值转换成字符串，你可以使用<strong>IPv4NumToString()</strong>显示的进行转换：</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT toTypeName(s), IPv4NumToString(from) as s FROM hits LIMIT 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">┌─toTypeName(IPv4NumToString(from))─┬─s──────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ String                            │ 183.247.232.58 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└───────────────────────────────────┴────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>或可以使用 <strong>CAST</strong> 将它转换为 <strong>UInt32</strong> 类型:</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT toTypeName(i), CAST(from as UInt32) as i FROM hits LIMIT 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">┌─toTypeName(CAST(from, &#x27;UInt32&#x27;))─┬──────────i─┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ UInt32                           │ 3086477370 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──────────────────────────────────┴────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_er05" id="ipv6">ipv6<a href="#ipv6" class="hash-link" aria-label="Direct link to ipv6" title="Direct link to ipv6">​</a></h2><p><strong>IPv6</strong> 是与<strong>FixedString(16)</strong>类型保持二进制兼容的 Domain 类型，其用于存储 IPv6 地址的值。它提供了更为紧凑的二进制存储的同时支持识别可读性更加友好的输入输出格式。</p><h3 class="anchor anchorWithStickyNavbar_er05" id="基本用法">基本用法<a href="#基本用法" class="hash-link" aria-label="Direct link to 基本用法" title="Direct link to 基本用法">​</a></h3><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE hits (url String, from IPv6) ENGINE = Memory;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DESCRIBE TABLE hits;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">┌─name─┬─type───┬─default_type─┬─default_expression─┬─comment─┬─codec_expression─┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ url  │ String │              │                    │         │                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ from │ IPv6   │              │                    │         │                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──────┴────────┴──────────────┴────────────────────┴─────────┴──────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>同时您也可以使用 <strong>IPv6</strong> 类型的列作为主键：</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE hits (url String, from IPv6) ENGINE = Memory;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在写入与查询时，<strong>IPv6</strong> 类型能够识别可读性更加友好的输入输出格式：</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">INSERT INTO hits (url, from) VALUES (&#x27;https://wikipedia.org&#x27;, &#x27;2a02:aa08:e000:3100::2&#x27;)(&#x27;https://byconity.com&#x27;, &#x27;2001:44c8:129:2632:33:0:252:2&#x27;)(&#x27;https://byconity.com/docs/en/&#x27;, &#x27;2a02:e980:1e::1&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT * FROM hits;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">┌─url────────────────────────────────┬─from──────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ https://byconity.com          │ 2001:44c8:129:2632:33:0:252:2 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ https://byconity.com/docs/en/ │ 2a02:e980:1e::1               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ https://wikipedia.org              │ 2a02:aa08:e000:3100::2        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└────────────────────────────────────┴───────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>同时它提供更为紧凑的二进制存储格式：</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT toTypeName(from), hex(from) FROM hits LIMIT 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">┌─toTypeName(from)─┬─hex(from)────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ IPv6             │ 200144C8012926320033000002520002 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──────────────────┴──────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>不可隐式转换为除 <strong>FixedString(16)</strong>以外的其他类型类型。如果要将<strong> IPv6</strong>类型的值转换成字符串，你可以使用<strong>IPv6NumToString()</strong>显示的进行转换：</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT toTypeName(s), IPv6NumToString(from) as s FROM hits LIMIT 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">┌─toTypeName(IPv6NumToString(from))─┬─s─────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ String                            │ 2001:44c8:129:2632:33:0:252:2 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└───────────────────────────────────┴───────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>或使用 <strong>CAST</strong> 将其转换为 <strong>FixedString(16)</strong>：</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT toTypeName(i), CAST(from as FixedString(16)) as i FROM hits LIMIT 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">┌─toTypeName(CAST(from, &#x27;FixedString(16)&#x27;))─┬─i───────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ FixedString(16)                           │  ��� │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└───────────────────────────────────────────┴─────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>Map(key, value)</h1><p><strong>Map(key, value)</strong> 可以存储 <strong>key:value</strong> 键值对类型的数据。</p><p><strong>参数</strong></p><ul><li><strong>key</strong> — 键值对的 key，类型可以是：<a href="https://clickhouse.com/docs/zh/sql-reference/data-types/string" target="_blank" rel="noopener noreferrer">String</a>, <a href="https://clickhouse.com/docs/zh/sql-reference/data-types/int-uint" target="_blank" rel="noopener noreferrer">Integer</a>, <a href="https://clickhouse.com/docs/zh/sql-reference/data-types/lowcardinality" target="_blank" rel="noopener noreferrer">LowCardinality</a>, 或者 <a href="https://clickhouse.com/docs/zh/sql-reference/data-types/fixedstring" target="_blank" rel="noopener noreferrer">FixedString</a>.</li><li><strong>value</strong> — 键值对的 value，类型可以是：<a href="https://clickhouse.com/docs/zh/sql-reference/data-types/string" target="_blank" rel="noopener noreferrer">String</a>, <a href="https://clickhouse.com/docs/zh/sql-reference/data-types/int-uint" target="_blank" rel="noopener noreferrer">Integer</a>, <a href="https://clickhouse.com/docs/zh/sql-reference/data-types/array" target="_blank" rel="noopener noreferrer">Array</a>, <a href="https://clickhouse.com/docs/zh/sql-reference/data-types/lowcardinality" target="_blank" rel="noopener noreferrer">LowCardinality</a>, 或者 <a href="https://clickhouse.com/docs/zh/sql-reference/data-types/fixedstring" target="_blank" rel="noopener noreferrer">FixedString</a>.</li></ul><p>内容比较多，参考 <a href="https://bytedance.feishu.cn/wiki/wikcnc08bHgaa8IuPODIOqeBQqc" target="_blank" rel="noopener noreferrer">Map 功能梳理（WIP）</a> CE 版本部分。</p><h1>Array(T)</h1><p>由 <strong>T</strong> 类型元素组成的数组。</p><p><strong>T</strong> 可以是任意类型，包含数组类型。 但不推荐使用多维数组，byconity 对多维数组的支持有限。例如，不能存储在 <strong>MergeTree</strong> 表中存储多维数组。</p><h2 class="anchor anchorWithStickyNavbar_er05" id="创建数组">创建数组<a href="#创建数组" class="hash-link" aria-label="Direct link to 创建数组" title="Direct link to 创建数组">​</a></h2><p>您可以使用 array 函数来创建数组：</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">array(T)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>您也可以使用方括号：</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">[]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>创建数组示例：</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT array(1, 2) AS x, toTypeName(x)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌─x─────┬─toTypeName(array(1, 2))─┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ [1,2] │ Array(UInt8)            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└───────┴─────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT [1, 2] AS x, toTypeName(x)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌─x─────┬─toTypeName([1, 2])─┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ [1,2] │ Array(UInt8)       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└───────┴────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_er05" id="使用数据类型">使用数据类型<a href="#使用数据类型" class="hash-link" aria-label="Direct link to 使用数据类型" title="Direct link to 使用数据类型">​</a></h2><p>byconity 会自动检测数组元素,并根据元素计算出存储这些元素最小的数据类型。如果在元素中存在 <a href="https://clickhouse.com/docs/zh/sql-reference/data-types/array#null-literal" target="_blank" rel="noopener noreferrer">NULL</a> 或存在 <a href="https://clickhouse.com/docs/zh/sql-reference/data-types/nullable#data_type-nullable" target="_blank" rel="noopener noreferrer">可为空</a> 类型元素，那么数组的元素类型将会变成 <a href="https://clickhouse.com/docs/zh/sql-reference/data-types/nullable" target="_blank" rel="noopener noreferrer">可为空</a>。</p><p>如果 byconity 无法确定数据类型，它将产生异常。当尝试同时创建一个包含字符串和数字的数组时会发生这种情况 (<strong>SELECT array(1, &#x27;a&#x27;)</strong>)。</p><p>自动数据类型检测示例：</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT array(1, 2, NULL) AS x, toTypeName(x)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌─x──────────┬─toTypeName(array(1, 2, NULL))─┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ [1,2,NULL] │ Array(Nullable(UInt8))        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└────────────┴───────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果您尝试创建不兼容的数据类型数组，byconity 将引发异常：</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT array(1, &#x27;a&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT [1, &#x27;a&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Query id: b3b81f4d-a082-4b2f-a63a-784edf94998e</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0 rows in set. Elapsed: 1.231 sec.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Received exception from server (version 21.8.7):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Code: 386. DB::Exception: Received from 0.0.0.0:30000. DB::Exception: There is no supertype for types UInt8, String because some of them are String/FixedString and some of them are not: While processing [1, &#x27;a&#x27;] SQLSTATE: HY000.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>Nullable（typename)</h1><p>允许用特殊标记 (<a href="https://clickhouse.com/docs/zh/sql-reference/data-types/nullable" target="_blank" rel="noopener noreferrer">NULL</a>) 表示«缺失值»，可以与 <strong>TypeName</strong> 的正常值存放一起。例如，<strong>Nullable(Int8)</strong> 类型的列可以存储 <strong>Int8</strong> 类型值，而没有值的行将存储 <strong>NULL</strong>。</p><p>对于 <strong>TypeName</strong>，不能使用复合数据类型数组和元组。复合数据类型可以包含 <strong>Nullable</strong> 类型值，例如 <strong>Array(Nullable(Int8))</strong>。</p><p><strong>Nullable</strong> 类型字段不能包含在表索引中。</p><p>除非在 byconity 服务器配置中另有说明，否则 <strong>NULL</strong> 是任何 <strong>Nullable</strong> 类型的默认值。</p><h2 class="anchor anchorWithStickyNavbar_er05" id="存储特性">存储特性<a href="#存储特性" class="hash-link" aria-label="Direct link to 存储特性" title="Direct link to 存储特性">​</a></h2><p>要在表的列中存储 <strong>Nullable</strong> 类型值，byconity 除了使用带有值的普通文件外，还使用带有 <strong>NULL</strong> 掩码的单独文件。 掩码文件中的条目允许 byconity 区分每个表行的 <strong>NULL</strong> 和相应数据类型的默认值。 由于附加了新文件，<strong>Nullable</strong> 列与类似的普通文件相比消耗额外的存储空间。</p><p>!!! 注意点 &quot;注意点&quot; 使用 <strong>Nullable</strong> 几乎总是对性能产生负面影响，在设计数据库时请记住这一点</p><p>掩码文件中的条目允许 byconity 区分每个表行的对应数据类型的«NULL»和默认值由于有额外的文件，«Nullable»列比普通列消耗更多的存储空间</p><h1>AggregateFunction(name, types_of_arguments…)</h1><p>聚合函数的中间状态，可以通过聚合函数名称加<strong>-State </strong>后缀的形式得到它。与此同时，当您需要访问该类型的最终状态数据时，您需要以相同的聚合函数名加<strong>-Merge</strong>后缀的形式来得到最终状态数据。</p><p><strong>AggregateFunction</strong> — 参数化的数据类型。</p><p><strong>参数</strong></p><ul><li>聚合函数名</li></ul><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">如果函数具备多个参数列表，请在此处指定其他参数列表中的值。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>聚合函数参数的类型</li></ul><p><strong>示例</strong></p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    column1 AggregateFunction(uniq, UInt64),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    column2 AggregateFunction(anyIf, String, UInt8),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    column3 AggregateFunction(quantiles(0.5, 0.9), UInt64)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">) ENGINE = ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>上述中的 <a href="https://clickhouse.com/docs/zh/sql-reference/data-types/aggregatefunction#agg_function-uniq" target="_blank" rel="noopener noreferrer">uniq</a>， anyIf (<a href="https://clickhouse.com/docs/zh/sql-reference/data-types/aggregatefunction#agg_function-any" target="_blank" rel="noopener noreferrer">任何</a> + <a href="https://clickhouse.com/docs/zh/sql-reference/data-types/aggregatefunction#agg-functions-combinator-if" target="_blank" rel="noopener noreferrer">如果</a>) 以及 <a href="https://clickhouse.com/docs/zh/sql-reference/data-types/aggregatefunction" target="_blank" rel="noopener noreferrer">分位数</a> 都为 byconity 中支持的聚合函数。</p><h2 class="anchor anchorWithStickyNavbar_er05" id="使用指南">使用指南<a href="#使用指南" class="hash-link" aria-label="Direct link to 使用指南" title="Direct link to 使用指南">​</a></h2><h3 class="anchor anchorWithStickyNavbar_er05" id="数据写入">数据写入<a href="#数据写入" class="hash-link" aria-label="Direct link to 数据写入" title="Direct link to 数据写入">​</a></h3><p>当需要写入数据时，您需要将数据包含在 <strong>INSERT SELECT</strong> 语句中，同时对于 <strong>AggregateFunction</strong> 类型的数据，您需要使用对应的以<strong>-State</strong>为后缀的函数进行处理。</p><p><strong>函数使用示例</strong></p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">uniqState(UserID)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">quantilesState(0.5, 0.9)(SendTiming)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>不同于 <strong>uniq</strong> 和 <strong>quantiles</strong> 函数返回聚合结果的最终值，以<strong>-State </strong>后缀的函数总是返回<strong> AggregateFunction</strong>类型的数据的中间状态。</p><p>对于 <strong>SELECT</strong> 而言，<strong>AggregateFunction</strong> 类型总是以特定的二进制形式展现在所有的输出格式中。例如，您可以使用 <strong>SELECT</strong> 语句将函数的状态数据转储为 <strong>TabSeparated</strong> 格式的同时使用 <strong>INSERT</strong> 语句将数据转储回去。</p><h3 class="anchor anchorWithStickyNavbar_er05" id="数据查询">数据查询<a href="#数据查询" class="hash-link" aria-label="Direct link to 数据查询" title="Direct link to 数据查询">​</a></h3><p>当从 <strong>AggregatingMergeTree</strong> 表中查询数据时，对于 <strong>AggregateFunction</strong> 类型的字段，您需要使用以<strong>-Merge </strong>为后缀的相同聚合函数来聚合数据。对于非<strong> AggregateFunction </strong>类型的字段，请将它们包含在<strong> GROUP BY</strong>子句中。</p><p>以<strong>-Merge </strong>为后缀的聚合函数，可以将多个<strong> AggregateFunction</strong>类型的中间状态组合计算为最终的聚合结果。</p><p>例如，如下的两个查询返回的结果总是一致：</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT uniq(UserID) FROM table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT uniqMerge(state) FROM (SELECT uniqState(UserID) AS state FROM table GROUP BY RegionID)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_er05" id="使用示例">使用示例<a href="#使用示例" class="hash-link" aria-label="Direct link to 使用示例" title="Direct link to 使用示例">​</a></h2><p>请参阅 CnchAggregatingMergeTree 的说明</p><h1>SimpleAggregateFunction</h1><p><strong>SimpleAggregateFunction(name, types_of_arguments…)</strong> 数据类型存储聚合函数的当前值, 并不像 <strong>AggregateFunction</strong> 那样存储其全部状态。这种优化可以应用于具有以下属性函数: 将函数 <strong>f</strong> 应用于行集合 <strong>S1 UNION ALL S2</strong> 的结果，可以通过将 <strong>f</strong> 分别应用于行集合的部分, 然后再将 <strong>f</strong> 应用于结果来获得: <strong>f(S1 UNION ALL S2) = f(f(S1) UNION ALL f(S2))</strong>。 这个属性保证了部分聚合结果足以计算出合并的结果，所以我们不必存储和处理任何额外的数据。</p><p>支持以下聚合函数:</p><ul><li><strong>any</strong></li><li><strong>anyLast</strong></li><li><strong>min</strong></li><li><strong>max</strong></li><li><strong>sum</strong></li><li><strong>sumWithOverflow</strong></li><li><strong>groupBitAnd</strong></li><li><strong>groupBitOr</strong></li><li><strong>groupBitXor</strong></li><li><strong>groupArrayArray</strong></li><li><strong>groupUniqArrayArray</strong></li><li><strong>sumMap</strong></li><li><strong>minMap</strong></li><li><strong>maxMap</strong></li><li><strong>argMin</strong></li><li><strong>argMax</strong></li></ul><p>!!! note &quot;注&quot; <strong>SimpleAggregateFunction(func, Type)</strong> 的值外观和存储方式于 <strong>Type</strong> 相同, 所以你不需要应用带有 <strong>-Merge</strong>/<strong>-State</strong> 后缀的函数。</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">`SimpleAggregateFunction` 的性能优于具有相同聚合函数的 `AggregateFunction` 。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>参数</strong></p><ul><li>聚合函数的名称。</li><li>聚合函数参数的类型。</li></ul><p><strong>示例</strong></p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">CREATE TABLE simple (id UInt64, val SimpleAggregateFunction(sum, Double)) ENGINE=CnchAggregatingMergeTree ORDER BY id;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>特殊数据类型</h1><p>特殊数据类型的值既不能存在表中也不能在结果中输出，但可用于查询的中间结果。</p><h2 class="anchor anchorWithStickyNavbar_er05" id="interval-类型">Interval 类型<a href="#interval-类型" class="hash-link" aria-label="Direct link to Interval 类型" title="Direct link to Interval 类型">​</a></h2><p>表示时间和日期间隔的数据类型家族。 <a href="https://clickhouse.com/docs/zh/sql-reference/operators/#operator-interval" target="_blank" rel="noopener noreferrer">INTERVAL</a> 运算的结果类型。</p><p>!!! warning &quot;警告&quot; <strong>Interval</strong> 数据类型值不能存储在表中。</p><p>结构:</p><ul><li>时间间隔作为无符号整数值。</li><li>时间间隔的类型。</li></ul><p>支持的时间间隔类型:</p><ul><li><strong>SECOND</strong></li><li><strong>MINUTE</strong></li><li><strong>HOUR</strong></li><li><strong>DAY</strong></li><li><strong>WEEK</strong></li><li><strong>MONTH</strong></li><li><strong>QUARTER</strong></li><li><strong>YEAR</strong></li></ul><p>对于每个时间间隔类型，都有一个单独的数据类型。 例如， <strong>DAY</strong> 间隔对应于 <strong>IntervalDay</strong> 数据类型:</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT toTypeName(INTERVAL 4 DAY)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">┌─toTypeName(toIntervalDay(4))─┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ IntervalDay                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_er05" id="使用说明">使用说明<a href="#使用说明" class="hash-link" aria-label="Direct link to 使用说明" title="Direct link to 使用说明">​</a></h3><p>您可以在与 <a href="https://clickhouse.com/docs/zh/sql-reference/data-types/date" target="_blank" rel="noopener noreferrer">日期</a> 和 <a href="https://clickhouse.com/docs/zh/sql-reference/data-types/datetime" target="_blank" rel="noopener noreferrer">日期时间</a> 类型值的算术运算中使用 <strong>Interval</strong> 类型值。 例如，您可以将 4 天添加到当前时间:</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT now() as current_date_time, current_date_time + INTERVAL 4 DAY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">┌───current_date_time─┬─plus(now(), toIntervalDay(4))─┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ 2019-10-23 10:58:45 │           2019-10-27 10:58:45 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────┴───────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>不同类型的间隔不能合并。 你不能使用诸如 <strong>4 DAY 1 HOUR</strong> 的时间间隔. 以小于或等于时间间隔最小单位的单位来指定间隔，例如，时间间隔 <strong>1 day and an hour</strong> 可以表示为 <strong>25 HOUR</strong> 或 <strong>90000 SECOND</strong>.</p><p>你不能对 <strong>Interval</strong> 类型的值执行算术运算，但你可以向 <strong>Date</strong> 或 <strong>DateTime</strong> 数据类型的值添加不同类型的时间间隔，例如:</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT now() AS current_date_time, current_date_time + INTERVAL 4 DAY + INTERVAL 3 HOUR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">┌───current_date_time─┬─plus(plus(now(), toIntervalDay(4)), toIntervalHour(3))─┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ 2019-10-23 11:16:28 │                                    2019-10-27 14:16:28 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────┴────────────────────────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>以下查询将导致异常:</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">select now() AS current_date_time, current_date_time + (INTERVAL 4 DAY + INTERVAL 3 HOUR)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">Received exception from server (version 19.14.1):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Code: 43. DB::Exception: Received from localhost:9000. DB::Exception: Wrong argument types for function plus: if one argument is Interval, then another must be Date or DateTime..</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_er05" id="表达式">表达式<a href="#表达式" class="hash-link" aria-label="Direct link to 表达式" title="Direct link to 表达式">​</a></h2><p>用于表示高阶函数中的 lambdas 表达式。</p><h2 class="anchor anchorWithStickyNavbar_er05" id="集合">集合<a href="#集合" class="hash-link" aria-label="Direct link to 集合" title="Direct link to 集合">​</a></h2><p>可以用在 IN 表达式的右半部分。</p><h2 class="anchor anchorWithStickyNavbar_er05" id="nothing">Nothing<a href="#nothing" class="hash-link" aria-label="Direct link to Nothing" title="Direct link to Nothing">​</a></h2><p>此数据类型的唯一目的是表示不是期望值的情况。 所以不能创建一个 <strong>Nothing</strong> 类型的值。</p><p>例如，字面量 <a href="https://clickhouse.com/docs/zh/sql-reference/syntax#null-literal" target="_blank" rel="noopener noreferrer">NULL</a> 的类型为 <strong>Nullable(Nothing)</strong>。详情请见 Nullable。</p><p><strong>Nothing</strong> 类型也可以用来表示空数组：</p><div class="codeBlockContainer_sAXX theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pc2u"><pre tabindex="0" class="prism-code language-text codeBlock_fjSB thin-scrollbar"><code class="codeBlockLines_FFvy"><span class="token-line" style="color:#393A34"><span class="token plain">:) SELECT toTypeName(array())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SELECT toTypeName([])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌─toTypeName(array())─┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ Array(Nothing)      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 rows in set. Elapsed: 0.062 sec.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup_tcEP"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Zxeh" aria-hidden="true"><svg class="copyButtonIcon_Pc49" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Ol7y" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags__Zuh padding--none margin-left--sm"><li class="tag_G1J1"><a class="tag_lVyf tagRegular_MP1R" href="/docs/tags/docs">Docs</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ByConity/ByConity/tree/main/website/../docs/en/基础使用手册/数据类型.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_rssB" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_ZTIL"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/基础使用手册/数据可视化"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">数据可视化</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/基础使用手册/监控集群"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">监控集群</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_a4zv thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#整型范围" class="table-of-contents__link toc-highlight">整型范围</a></li><li><a href="#无符号整型范围" class="table-of-contents__link toc-highlight">无符号整型范围</a></li><li><a href="#如何生成" class="table-of-contents__link toc-highlight">如何生成</a></li><li><a href="#用法示例" class="table-of-contents__link toc-highlight">用法示例</a></li><li><a href="#限制" class="table-of-contents__link toc-highlight">限制</a></li><li><a href="#使用浮点数" class="table-of-contents__link toc-highlight">使用浮点数</a></li><li><a href="#nan-和-inf" class="table-of-contents__link toc-highlight">NaN 和 Inf</a></li><li><a href="#参数" class="table-of-contents__link toc-highlight">参数</a></li><li><a href="#十进制值范围" class="table-of-contents__link toc-highlight">十进制值范围</a></li><li><a href="#内部表示方式" class="table-of-contents__link toc-highlight">内部表示方式</a></li><li><a href="#运算和结果类型" class="table-of-contents__link toc-highlight">运算和结果类型</a></li><li><a href="#溢出检查" class="table-of-contents__link toc-highlight">溢出检查</a></li><li><a href="#date" class="table-of-contents__link toc-highlight">Date</a><ul><li><a href="#示例" class="table-of-contents__link toc-highlight"><strong>示例</strong></a></li></ul></li><li><a href="#datetime" class="table-of-contents__link toc-highlight">DateTime</a><ul><li><a href="#时区" class="table-of-contents__link toc-highlight">时区</a></li></ul></li><li><a href="#datetime64" class="table-of-contents__link toc-highlight">DateTime64</a><ul><li><a href="#示例-1" class="table-of-contents__link toc-highlight">示例</a></li></ul></li><li><a href="#用法示例-1" class="table-of-contents__link toc-highlight">用法示例</a></li><li><a href="#规则及用法" class="table-of-contents__link toc-highlight">规则及用法</a></li><li><a href="#string" class="table-of-contents__link toc-highlight">String</a><ul><li><a href="#编码" class="table-of-contents__link toc-highlight">编码</a></li></ul></li><li><a href="#fixstring" class="table-of-contents__link toc-highlight">FixString</a></li><li><a href="#nestedname1-type1-name2-type2-" class="table-of-contents__link toc-highlight">Nested(Name1 Type1, Name2 Type2, …)</a></li><li><a href="#创建元组" class="table-of-contents__link toc-highlight">创建元组</a></li><li><a href="#元组中的数据类型" class="table-of-contents__link toc-highlight">元组中的数据类型</a></li><li><a href="#语法" class="table-of-contents__link toc-highlight">语法</a></li><li><a href="#描述" class="table-of-contents__link toc-highlight">描述</a></li><li><a href="#例子" class="table-of-contents__link toc-highlight">例子</a></li><li><a href="#定义" class="table-of-contents__link toc-highlight">定义</a><ul><li><a href="#domains-的额外特性" class="table-of-contents__link toc-highlight">Domains 的额外特性</a></li><li><a href="#domains-类型的限制" class="table-of-contents__link toc-highlight">Domains 类型的限制</a></li></ul></li><li><a href="#ipv4" class="table-of-contents__link toc-highlight">ipv4</a><ul><li><a href="#基本使用" class="table-of-contents__link toc-highlight">基本使用</a></li></ul></li><li><a href="#ipv6" class="table-of-contents__link toc-highlight">ipv6</a><ul><li><a href="#基本用法" class="table-of-contents__link toc-highlight">基本用法</a></li></ul></li><li><a href="#创建数组" class="table-of-contents__link toc-highlight">创建数组</a></li><li><a href="#使用数据类型" class="table-of-contents__link toc-highlight">使用数据类型</a></li><li><a href="#存储特性" class="table-of-contents__link toc-highlight">存储特性</a></li><li><a href="#使用指南" class="table-of-contents__link toc-highlight">使用指南</a><ul><li><a href="#数据写入" class="table-of-contents__link toc-highlight">数据写入</a></li><li><a href="#数据查询" class="table-of-contents__link toc-highlight">数据查询</a></li></ul></li><li><a href="#使用示例" class="table-of-contents__link toc-highlight">使用示例</a></li><li><a href="#interval-类型" class="table-of-contents__link toc-highlight">Interval 类型</a><ul><li><a href="#使用说明" class="table-of-contents__link toc-highlight">使用说明</a></li></ul></li><li><a href="#表达式" class="table-of-contents__link toc-highlight">表达式</a></li><li><a href="#集合" class="table-of-contents__link toc-highlight">集合</a></li><li><a href="#nothing" class="table-of-contents__link toc-highlight">Nothing</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/ByConity简介/主要原理概念">Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_TSiV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_TSiV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_TSiV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/ByConity/ByConity" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_TSiV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 ByteDance.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.42b9ce04.js"></script>
<script src="/assets/js/main.081140d6.js"></script>
</body>
</html>