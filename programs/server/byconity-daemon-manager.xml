<?xml version="1.0"?>
<!--
  NOTE: User and query level settings are set up in "users.xml" file.
  If you have accidentally specified user-level settings here, server won't start.
  You can either move the settings to the right place inside "users.xml" file
   or add <skip_check_for_incorrect_settings>1</skip_check_for_incorrect_settings> here.
-->
<yandex>
    <logger>
        <level>trace</level>
        <log>/root/app/logs/byconity-dm/dm.log</log>
        <errorlog>/root/app/logs/byconity-dm/dm.log</errorlog>
        <size>1000M</size>
        <count>10</count>
    </logger>

    <path>/root/app/logs/byconity-dm/</path>
    <cnch_data_retention_time_in_sec>5</cnch_data_retention_time_in_sec>
    <background_schedule_pool_size>6</background_schedule_pool_size>

    <rpc_port>18686</rpc_port>

    <daemon_manager>
        <port>18695</port>
        <daemon_jobs>
            <job>
                <name>PART_GC</name>
                <interval>10000</interval>
                <disable>false</disable>
            </job>
            <job>
                <name>PART_MERGE</name>
                <interval>10000</interval>
                <disable>false</disable>
            </job>
            <job>
                <name>CONSUMER</name>
                <interval>10000</interval>
                <disable>false</disable>
            </job>
            <job>
                <name>DEDUP_WORKER</name>
                <interval>10000</interval>
                <disable>false</disable>
            </job>
            <job>
                <name>PART_CLUSTERING</name>
                <interval>10000</interval>
                <disable>false</disable>
            </job>
            <job>
                <name>GLOBAL_GC</name>
                <interval>5000</interval>
                <disable>false</disable>
            </job>
            <job>
                <name>TXN_GC</name>
                <interval>600000</interval>
                <disable>false</disable>
            </job>
        </daemon_jobs>
    </daemon_manager>

    <storage_configuration>
        <disks>
            <default/>
            <server_local_disk1>
                <path>/root/app/data/byconity_server/server_local_disk/data/0/</path>
            </server_local_disk1>
            <server_hdfs_disk0>
                <path>/user/clickhouse/</path>
                <type>bytehdfs</type>
            </server_hdfs_disk0>
        </disks>
        <policies>
            <default>
                <volumes>
                    <local>
                        <default>default</default>
                        <disk>default</disk>
                        <disk>server_local_disk1</disk>
                    </local>
                </volumes>
            </default>
            <cnch_default_hdfs>
                <volumes>
                    <hdfs>
                        <default>server_hdfs_disk0</default>
                        <disk>server_hdfs_disk0</disk>
                    </hdfs>
                </volumes>
            </cnch_default_hdfs>
        </policies>
    </storage_configuration>
    <cnch_config>/root/app/config/cnch_config.xml</cnch_config>
</yandex>
