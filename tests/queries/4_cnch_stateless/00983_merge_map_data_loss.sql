CREATE TABLE test_map_01 (c_date Date,c_datetime DateTime64(3),s_map Map(String, String),i_map Map(String, Int64),f_map Map(String, Float64) ) ENGINE = CnchMergeTree PARTITION BY c_date ORDER BY c_date TTL toDate(c_date) + toIntervalDay(30) SETTINGS index_granularity = 8192;
SYSTEM START MERGES test_map_01;
INSERT INTO test_map_01 (c_date, c_datetime, s_map, i_map, f_map) values ('2100-04-14', '2100-04-14 13:16:17', {'s_a': 'abc', 's_b': 'ffff', 's_c': '123', 's_d': '1233', 's_e': '1234', 's_f': '1234'}, {'age': 18}, {'price': 10.20000003});
INSERT INTO test_map_01 (c_date, c_datetime, s_map, i_map, f_map) values ('2100-04-14', '2100-04-14 13:16:18', {'s_a': 'abc', 's_b': 'ffff', 's_c': '123', 's_d': '1233', 's_e': '1234', 's_f': '1234'}, {'age': 18}, {'price': 10.20000003});
INSERT INTO test_map_01 (c_date, c_datetime, s_map, i_map, f_map) values ('2100-04-14', '2100-04-14 13:16:19', {'s_b': 'ffff', 's_c': '123', 's_d': '1233', 's_e': '1234', 's_f': '1234'}, {'age': 18}, {'price': 10.20000003});
INSERT INTO test_map_01 (c_date, c_datetime, s_map, i_map, f_map) values ('2100-04-14', '2100-04-14 13:16:20', {'s_a': 'abc', 's_b': 'ffff', 's_c': '123', 's_d': '1233', 's_e': '1234', 's_f': '1234'}, {}, {'price': 10.20000003});
INSERT INTO test_map_01 (c_date, c_datetime, s_map, i_map, f_map) values ('2100-04-14', '2100-04-14 13:16:21', {'s_a': 'abc', 's_b': 'ffff', 's_c': '123', 's_d': '1233', 's_e': '1234', }, {'age': 18}, {});
OPTIMIZE TABLE test_map_01;
SELECT sleep(3) FORMAT Null;;
SELECT * FROM test_map_01 ORDER BY c_datetime;
DROP TABLE test_map_01;